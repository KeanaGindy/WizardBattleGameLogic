<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GamePlay.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ForStudents</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">GamePlay.java</span></div><h1>GamePlay.java</h1><pre class="source lang-java linenums">import java.util.*;

public class GamePlay implements GamePlayInterface {
    
    public Character player;
    public List&lt;Character&gt; Opponents;
    public List&lt;Character&gt; remove;
    
    /**
     * Default constructor for Game Play.
     */
    public GamePlay() {
<span class="fc" id="L13">        this(new Barbarian());</span>
<span class="fc" id="L14">    }</span>
    
    /**
     * Parameterized constructor for Game Play.
     * 
     * @param character type for player to use
     */
<span class="fc" id="L21">    public GamePlay(Character character) {</span>
<span class="fc" id="L22">        this.player = character;</span>
<span class="fc" id="L23">        this.Opponents = new LinkedList&lt;&gt;();</span>
<span class="fc" id="L24">        addOpponent(new Wizard());</span>
<span class="fc" id="L25">        this.Opponents.add(new Bard());</span>
<span class="fc" id="L26">        this.Opponents.add(new Druid());</span>
<span class="fc" id="L27">        this.Opponents.add(new Rogue());</span>
<span class="fc" id="L28">        this.Opponents.add(new Ranger());</span>
<span class="fc" id="L29">        this.Opponents.add(new Barbarian());</span>
<span class="fc" id="L30">    }</span>

    /**
     * Parameterized constructor for Game Play.
     * Allows choice of opponent.
     *
     * @param character type for player to use
     * @param opponent type for opponent
     */
<span class="fc" id="L39">    public GamePlay(Character character, Character opponent) {</span>
<span class="fc" id="L40">        this.player = character;</span>
<span class="fc" id="L41">        this.Opponents = new LinkedList&lt;&gt;();</span>
<span class="fc" id="L42">        this.Opponents.add(opponent);</span>
<span class="fc" id="L43">    }</span>

    /**
     * Utility method to add an opponent to the list of opponents.
     *
     * @param opponent to add
     * @return true if successful, false otherwise
     */
    @Override
    public boolean addOpponent(Character opponent) {
<span class="pc bpc" id="L53" title="1 of 2 branches missed.">        if (this.Opponents.add(opponent)) return true;</span>
<span class="nc" id="L54">        else return false;</span>
    }

    /**
     * Utility method to remove an opponent from the list of opponents.
     *
     * @param opponent to remove
     * @return true if successful, false otherwise
     */
    @Override
    public boolean removeOpponent(Character opponent) {
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">        if (this.Opponents.remove(opponent))</span>
<span class="fc" id="L66">            return true;</span>
        else
<span class="nc" id="L68">            return false;</span>
    }

    /**
     * Function to add experience points for attacking character and returning the damage the character tries to deal.
     * Experience is only gained if the character still has more than 0 health, damage is also only dealt when health &gt; 0. 
     * If the health of a character is less than 10 they deal double damage.
     *
     * @param character that is dealing damage
     * @return damage stat of character as int
     */
    @Override
    public int dealDamage(Character character) {
<span class="fc" id="L81">        int damage = 0;</span>
<span class="fc bfc" id="L82" title="All 2 branches covered.">        if(character.health &gt; 10){</span>
<span class="fc" id="L83">            character.experience = character.experience+character.damage;</span>
<span class="fc" id="L84">            damage = character.damage;</span>
<span class="fc bfc" id="L85" title="All 4 branches covered.">        } else if (character.health &gt; 0 &amp;&amp; character.health &lt; 10){</span>
<span class="fc" id="L86">            character.experience = character.experience+character.damage;</span>
<span class="fc" id="L87">            damage = (character.damage*2);</span>
        } else {
<span class="fc" id="L89">            damage = 0;</span>
        }
<span class="fc" id="L91">        return damage;</span>
    }

    /**
     * Function to add experience points for attacked character as well as update their health based on the attack and
     * their protection.
     * If their protection is higher than the blowDamage then the character will heal by half of that difference they will also gain
     * the full difference as experience
     * 
     * If their protection is lower or equal than the blowDamage then the character will take half the difference as experience and the health will be reduced
     * by the full difference.
     * 
     * 
     * If the difference by half is 0.5 we floor it. 
     * 
     * Health cannot go below 0
     * 
     * @param character that is being attacked
     * @param blowDamage full force of attack without protection factored in
     * @return amount of damage actually taken by the character as int
     */
    @Override
    public int takeDamage(Character character, int blowDamage) {

<span class="fc" id="L115">        int damage = 0;</span>

<span class="pc bpc" id="L117" title="1 of 4 branches missed.">        if(character.protection &gt; blowDamage &amp;&amp; character.health &gt; 0){</span>
<span class="fc" id="L118">            damage = character.protection-blowDamage;</span>
<span class="fc" id="L119">            character.health = character.health + (int)(0.5*(damage));</span>
<span class="fc" id="L120">            character.experience = character.experience + (damage);</span>
<span class="pc bpc" id="L121" title="2 of 4 branches missed.">        } else if (character.protection &lt;= blowDamage &amp;&amp; character.health &gt; 0){</span>
<span class="fc" id="L122">            damage = blowDamage-character.protection;</span>
<span class="fc" id="L123">            character.experience = character.experience + (int)(0.5*(damage));</span>
<span class="fc" id="L124">            character.health = character.health - (damage);</span>
        }

<span class="fc" id="L127">        return damage;</span>
    }

    /**
     * Function to level up characters correctly, if they have enough points to do so.
     * You can assume that the new stats are what we want, so they are not wrong. So this method is not wrong, it is the way we want it!
 
     * @param character
     * @return boolean true if character leveld up, false if they did not
     */
    @Override
    public boolean levelUp(Character character) {
<span class="fc bfc" id="L139" title="All 2 branches covered.">        if(character.experience &gt;= character.pointsPerLevel) {</span>
<span class="pc bpc" id="L140" title="1 of 2 branches missed.">            if(character.experience == character.pointsPerLevel)</span>
<span class="nc" id="L141">                character.experience += 5;</span>

<span class="fc" id="L143">            character.level++;</span>
<span class="fc" id="L144">            character.pointsPerLevel *= 2; // need more points to level up next time</span>
<span class="fc" id="L145">            character.health = 100; // level up resets health</span>

<span class="fc bfc" id="L147" title="All 2 branches covered.">            if(character.getClass().getName() == new Barbarian().getClass().getName()){</span>
<span class="fc" id="L148">                character.damage += 10;</span>
<span class="fc" id="L149">                character.speed=character.speed+0.25;</span>
<span class="fc" id="L150">                character.protection +=2;</span>
<span class="fc bfc" id="L151" title="All 2 branches covered.">            }else if(character.getClass().getName() == new Bard().getClass().getName()){</span>
<span class="fc" id="L152">                character.damage += character.damage/2;</span>
<span class="fc" id="L153">                character.speed += 0.5;</span>
<span class="fc" id="L154">                character.protection += character.protection/2;</span>
<span class="fc bfc" id="L155" title="All 2 branches covered.">            }else if(character.getClass().getName() == new Druid().getClass().getName()){</span>
<span class="fc" id="L156">                character.damage += 10;</span>
<span class="fc" id="L157">                character.speed += 0.25;</span>
<span class="fc" id="L158">                character.protection = character.protection += 2;</span>
<span class="fc bfc" id="L159" title="All 2 branches covered.">            }else if(character.getClass().getName() == new Ranger().getClass().getName()){</span>
<span class="fc" id="L160">                character.damage += character.damage%10;</span>
<span class="fc" id="L161">                character.speed += 0.5;</span>
<span class="fc" id="L162">                character.protection += character.protection%5;</span>
<span class="fc bfc" id="L163" title="All 2 branches covered.">            }else if(character.getClass().getName() == new Rogue().getClass().getName()){</span>
<span class="fc" id="L164">                character.damage += character.damage/3;</span>
<span class="fc" id="L165">                character.speed += 1.25;</span>
<span class="fc" id="L166">                character.protection += 3;</span>
<span class="pc bpc" id="L167" title="1 of 2 branches missed.">            }else if(character.getClass().getName() == new Wizard().getClass().getName()){</span>
<span class="fc" id="L168">                character.damage += 5;</span>
<span class="fc" id="L169">                character.speed += 1;</span>
<span class="fc" id="L170">                character.protection += 1;</span>
            }else{
<span class="nc" id="L172">                character.damage++;</span>
<span class="nc" id="L173">                character.speed += 0.25;</span>
<span class="nc" id="L174">                character.protection++;</span>
            }
<span class="fc" id="L176">            levelUp(character);</span>
        }
        boolean test;
<span class="fc" id="L179">        return test = false;</span>
    }

    /**
     * Function that facilitates the attacker dealing damage to their opponent and then the opposite.
     * 
     * A character can only attack if both still have health greater than 0, this needs to be true for both attacks happening here
     * 
     * You do NOT have the implemented methods for this but just 5 implemented versions in the .class files in the cls
     * directory. So you need to Blackbox test this method based on the description you get here. As you see the method returns void, 
     * so no return type. You need to come up with a way to still test if this method does what it is supposed to do. 
     * It is up to you to figure that out. 
     * 
     * This method uses dealDamage and takeDamage from above, which you should BlackBox test first. 
     * 
     * An attack only happens if health&gt;0 for both characters
     * The first character attacks first, by using dealsDamage and the opponent takesDamage. 
     * Then the characters level up (call levelUp on both) -- if health &gt; 0
     * 
     * Then the other character attacks, same procedure as above
     * 
     * 
     *
     * @param character that is attacking
     * @param opponent that is being attacked
     */
    @Override
    public void attack(Character character, Character opponent) {
<span class="fc" id="L207">        int damage = 0;</span>
<span class="fc bfc" id="L208" title="All 4 branches covered.">        if(character.health &gt; 0 &amp;&amp; opponent.health &gt; 0){</span>
<span class="fc" id="L209">            damage = dealDamage(character);</span>
<span class="fc" id="L210">            takeDamage(opponent, damage);</span>
<span class="fc" id="L211">            levelUp(character);</span>
<span class="fc bfc" id="L212" title="All 2 branches covered.">            if(opponent.health &gt; 0){</span>
<span class="fc" id="L213">                levelUp(opponent);</span>
<span class="fc" id="L214">                damage = dealDamage(opponent);</span>
<span class="fc" id="L215">                takeDamage(character, damage);</span>
<span class="fc" id="L216">                levelUp(opponent);</span>
<span class="pc bpc" id="L217" title="1 of 2 branches missed.">                if(character.health &gt; 0){</span>
<span class="fc" id="L218">                    levelUp(character);</span>
                }
            }
        }
<span class="fc" id="L222">    }</span>

    /**
     * This method returns the amount of experience points earned by the player during one round of attacks.
     * White box test me in assignment 3 (not in 2) !
     * What this method does:
     * - The player will attack each opponent once, and each opponent will attack the player once.
     * - The player will just iterate through the list of opponents in the order they are in
     * - The attack from an opponent and the attack on the same opponent happen right after one another. The order in
     *      which the attacks happen are based on the speed of the opponent and player. The faster of the two
     *      attacks first, then the slower. If equal the player attacks first. 
     *      The character that attacks first is awarded the difference of the two speeds
     *      rounded up to the next integer in experience points. Your player then moves onto the next opponent.
     * - The attack and levelUp are in separate methods (for whitebox testing in assignment 3 you can assume that these methods work 
     *   correctly and it just shows up as &quot;node&quot; in your graph)
     *
     * @return the amount of experience points that the play acquired during play as int
     */
    @Override
    public int play() {
<span class="fc" id="L242">        int startingExperience = player.experience;</span>
<span class="fc bfc" id="L243" title="All 2 branches covered.">        for (Character opponent : Opponents) {</span>
            //determine order of attack and give experience points for attacking first
<span class="fc" id="L245">            Character[] orderOfAttack = new Character[2];</span>
<span class="fc bfc" id="L246" title="All 2 branches covered.">            if (player.speed &gt; opponent.speed) {</span>
<span class="fc" id="L247">                orderOfAttack[0] = player;</span>
<span class="fc" id="L248">                orderOfAttack[1] = opponent;</span>
<span class="fc" id="L249">                player.experience += Math.ceil(player.speed - opponent.speed);</span>
                } else {
<span class="fc" id="L251">                orderOfAttack[1] = opponent;</span>
<span class="fc" id="L252">                orderOfAttack[0] = player;</span>
<span class="fc" id="L253">                opponent.experience += Math.ceil(opponent.speed - player.speed);</span>
             }
            

            // attack in order
<span class="fc" id="L258">            attack(orderOfAttack[0], orderOfAttack[1]);</span>
            
<span class="fc" id="L260">        }</span>

        // remove opponents that have &lt;= 0 health
<span class="fc bfc" id="L263" title="All 2 branches covered.">        for (int o=0; o &lt; Opponents.size(); o++) {</span>
<span class="fc bfc" id="L264" title="All 2 branches covered.">            if (Opponents.get(o).health &lt;= 0) {</span>
<span class="fc" id="L265">                System.out.println(Opponents.get(o).getClass().getName() + &quot; removed\n&quot;);</span>
<span class="fc" id="L266">                removeOpponent(Opponents.get(o));</span>
<span class="fc" id="L267">                o--;</span>
            }
        }


<span class="fc" id="L272">        return player.experience - startingExperience;</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>